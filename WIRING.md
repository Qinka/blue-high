# 硬件接线说明

## STM32F103C8T6 引脚映射

### OLED 显示屏 (I2C 接口)

使用 I2C1 外设：

| OLED 引脚 | STM32 引脚 | 功能说明 |
|-----------|-----------|----------|
| VCC       | 3.3V      | 电源正极 |
| GND       | GND       | 电源负极 |
| SCL       | PB6       | I2C 时钟线 |
| SDA       | PB7       | I2C 数据线 |

**注意事项：**
- OLED 显示屏通常使用 SSD1306 控制器
- I2C 地址一般为 0x3C 或 0x3D
- 需要上拉电阻（通常模块自带）
- 电压为 3.3V，不要连接 5V

### LoRa 模块 (SPI 接口)

使用 SPI1 外设：

| LoRa 引脚 | STM32 引脚 | 功能说明 |
|-----------|-----------|----------|
| VCC       | 3.3V      | 电源正极 |
| GND       | GND       | 电源负极 |
| SCK       | PA5       | SPI 时钟线 |
| MISO      | PA6       | 主设备输入，从设备输出 |
| MOSI      | PA7       | 主设备输出，从设备输入 |
| NSS/CS    | PA4       | 片选信号 |
| RST       | PA3       | 复位信号 |
| DIO0      | (可选)    | 中断引脚（当前未使用）|

**注意事项：**
- LoRa 模块通常使用 SX1276/SX1278 芯片
- 必须连接天线，否则可能损坏模块
- 工作电压为 3.3V
- 发射功率不要超过模块规格
- 注意当地无线频率法规（433MHz/868MHz/915MHz）

## 完整接线图

```
STM32F103C8T6 蓝色开发板
┌──────────────────────────┐
│                          │
│  3.3V ──┬─── OLED VCC    │
│         └─── LoRa VCC    │
│                          │
│  GND  ──┬─── OLED GND    │
│         └─── LoRa GND    │
│                          │
│  PA3  ────── LoRa RST    │
│  PA4  ────── LoRa CS     │
│  PA5  ────── LoRa SCK    │
│  PA6  ────── LoRa MISO   │
│  PA7  ────── LoRa MOSI   │
│                          │
│  PB6  ────── OLED SCL    │
│  PB7  ────── OLED SDA    │
│                          │
└──────────────────────────┘
```

## 电源要求

- **电源电压**：3.3V（通过 USB 供电或外部稳压器）
- **电流消耗**：
  - STM32F103C8T6: ~10-30mA（运行时）
  - OLED 显示屏: ~20mA
  - LoRa 模块: ~120mA（发射时峰值）
- **建议电源**：能提供至少 200mA 的 3.3V 稳压电源

## ST-Link 连接

用于程序下载和调试：

| ST-Link | STM32F103C8T6 |
|---------|---------------|
| SWDIO   | SWDIO (PA13)  |
| SWCLK   | SWCLK (PA14)  |
| GND     | GND           |
| 3.3V    | 3.3V          |

## 常见问题

### OLED 无显示
1. 检查 I2C 接线是否正确
2. 确认 OLED 电源指示灯是否亮起
3. 检查 I2C 地址是否匹配（0x3C 或 0x3D）
4. 使用 I2C 扫描程序确认设备地址

### LoRa 无法通信
1. 确认天线已正确连接
2. 检查 SPI 接线
3. 确认两个设备的频率设置一致
4. 检查发射功率设置是否合理
5. 确保设备之间距离不要太远

### 编程/调试问题
1. 确认 ST-Link 驱动已正确安装
2. 检查 SWDIO 和 SWCLK 连接
3. 确保开发板已正确供电
4. 尝试按下复位按钮后重新连接
